<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LC Part 2 마스터</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css'); body { font-family: 'Pretendard', sans-serif; }</style>
</head>
<body class="bg-slate-900 text-white min-h-screen">

    <div id="start-overlay" class="fixed inset-0 z-[200] bg-slate-900 flex flex-col items-center justify-center p-8 text-center">
        <h2 class="text-3xl font-black mb-2 tracking-tighter text-indigo-400">LC Part 2 훈련</h2>
        <p class="text-slate-400 mb-8 font-bold text-sm text-center">파일이 안 나올 경우 주소를 확인해주세요.</p>
        <div class="grid grid-cols-2 gap-4 w-full max-w-xs">
            <button onclick="startTest(1)" class="py-4 bg-slate-800 rounded-2xl font-black border border-slate-700 active:scale-95">TEST 1</button>
            <button onclick="startTest(2)" class="py-4 bg-slate-800 rounded-2xl font-black border border-slate-700 active:scale-95">TEST 2</button>
            <button onclick="startTest(3)" class="py-4 bg-slate-800 rounded-2xl font-black border border-slate-700 active:scale-95">TEST 3</button>
            <button onclick="startTest(4)" class="py-4 bg-slate-800 rounded-2xl font-black border border-slate-700 active:scale-95">TEST 4</button>
            <button onclick="startTest(5)" class="py-4 bg-indigo-600 rounded-2xl font-black col-span-2 active:scale-95">TEST 5 시작하기</button>
        </div>
    </div>

    <nav class="p-6 flex justify-between items-center max-w-md mx-auto">
        <button onclick="location.reload()"><i class="fas fa-home text-slate-400 text-xl"></i></button>
        <span id="progress" class="font-black text-indigo-400 text-lg uppercase tracking-widest">READY</span>
        <div class="w-4"></div>
    </nav>

    <main class="max-w-md mx-auto px-6 pb-20">
        <div id="quiz-area" class="space-y-8">
            <div class="bg-white rounded-[3rem] p-12 text-center shadow-2xl relative overflow-hidden">
                <button id="main-play-btn" onclick="playQuizAudio()" class="w-24 h-24 bg-indigo-600 rounded-full text-white text-4xl shadow-xl active:scale-95 flex items-center justify-center mx-auto">
                    <i class="fas fa-play ml-1"></i>
                </button>
                <p id="audio-status" class="text-slate-400 font-black text-[10px] mt-4 uppercase tracking-widest text-center">Click Play</p>
            </div>
            <div class="grid gap-3" id="options-container">
                <button onclick="checkAnswer(0)" class="w-full py-5 bg-slate-800 rounded-2xl font-bold text-left px-6 border border-slate-700">(A) Option A</button>
                <button onclick="checkAnswer(1)" class="w-full py-5 bg-slate-800 rounded-2xl font-bold text-left px-6 border border-slate-700">(B) Option B</button>
                <button onclick="checkAnswer(2)" class="w-full py-5 bg-slate-800 rounded-2xl font-bold text-left px-6 border border-slate-700">(C) Option C</button>
            </div>
        </div>
    </main>

    <script>
        let currentTest = 1;
        let currentIdx = 0;
        let testData = [];

        function startTest(num) {
            currentTest = num;
            currentIdx = 0;
            testData = [];
            for(let i=7; i<=31; i++) {
                // [강사님 필독] 파일명 생성 규칙 (Test_01-07.mp3 형태)
                let testNum = currentTest < 10 ? '0' + currentTest : currentTest;
                let qNum = i < 10 ? '0' + i : i;
                
                testData.push({
                    id: i,
                    // 파일명을 소문자/대문자 섞어서 시도해보기 위해 변수로 저장
                    audio: `Test_${testNum}-${qNum}.mp3` 
                });
            }
            document.getElementById('start-overlay').classList.add('hidden');
            loadQuiz();
        }

        function loadQuiz() {
            const data = testData[currentIdx];
            document.getElementById('progress').innerText = `TEST ${currentTest} - Q ${data.id}`;
        }

        function playQuizAudio() {
            const fileName = testData[currentIdx].audio;
            // 주소 끝에 임의의 숫자를 붙여 '강력 새로고침' 효과를 줍니다 (캐시 방지)
            const audioPath = "audio/" + fileName + "?v=" + Math.random();
            const audio = new Audio(audioPath);
            
            console.log("시도하는 파일 경로:", audioPath);

            audio.play().catch(e => {
                // 에러 발생 시 주소를 팝업으로 띄움
                const fullUrl = window.location.origin + window.location.pathname.replace("shadowing2.html", "") + "audio/" + fileName;
                alert("파일을 못 찾았습니다!\n\n[시도한 파일명]\n" + fileName + "\n\n[실제 주소]\n" + fullUrl + "\n\n실제 깃허브의 파일명과 대소문자/하이픈이 똑같은지 확인해주세요.");
            });
        }

        function checkAnswer(choice) {
            alert("정답입니다! 다음 문제로 넘어갑니다.");
            currentIdx++;
            if (currentIdx < testData.length) loadQuiz();
            else alert("학습 완료!");
        }
    </script>
</body>
</html>