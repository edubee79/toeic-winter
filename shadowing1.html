<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Core Verbs 50 | 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { font-family: 'Pretendard', sans-serif; -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
        .word-card { perspective: 1000px; }
        .card-inner { transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; position: relative; height: 320px; }
        .card-inner.is-flipped { transform: rotateY(180deg); }
        .card-front, .card-back { backface-visibility: hidden; position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; border-radius: 2.5rem; padding: 2rem; }
        .card-back { transform: rotateY(180deg); background-color: #4f46e5; color: white; }
        .hidden { display: none !important; }
    </style>
</head>
<body class="bg-slate-900 text-white min-h-screen font-pretendard">

    <div id="start-overlay" class="fixed inset-0 z-[200] bg-slate-900 flex flex-col items-center justify-center p-10 text-center">
        <div class="w-20 h-20 bg-indigo-600 rounded-3xl flex items-center justify-center mb-6 shadow-2xl animate-bounce">
            <i class="fas fa-volume-up text-3xl text-white"></i>
        </div>
        <h2 class="text-2xl font-black mb-2 tracking-tighter">오디오 활성화</h2>
        <p class="text-slate-400 font-bold text-sm mb-8">모바일 기기에서 소리를 듣기 위해<br>아래 버튼을 먼저 눌러주세요.</p>
        <button id="unlock-btn" class="w-full max-w-xs py-5 bg-white text-slate-900 rounded-2xl font-black text-lg shadow-xl active:scale-95 transition-all">스피커 켜고 시작하기</button>
    </div>

    <nav class="p-6 flex justify-between items-center max-w-md mx-auto">
        <button onclick="location.reload()" class="text-slate-400"><i class="fas fa-rotate-left text-xl"></i></button>
        <h1 class="font-black text-lg tracking-tighter italic text-indigo-400 uppercase">VOCA MASTER</h1>
        <div class="w-8"></div>
    </nav>

    <main id="main-content" class="max-w-md mx-auto px-6 pb-20">
        <div id="step1" class="text-center">
            <div class="mb-10 text-left">
                <p class="text-indigo-500 text-[10px] font-black uppercase tracking-widest mb-1">Step 01. Classification</p>
                <h2 class="text-2xl font-black italic">Do you know this?</h2>
            </div>
            <div class="bg-white rounded-[3rem] p-12 shadow-2xl mb-10 border border-white/10 flex flex-col items-center justify-center min-h-[300px]">
                <span id="sortWord" class="text-5xl font-black text-slate-900 tracking-tighter italic">Ready</span>
                <div class="mt-8 text-slate-300 font-bold text-sm"><span id="sortCount" class="text-indigo-600">0</span> / 50</div>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="sortWordAction(false)" class="py-6 bg-slate-800 text-slate-400 rounded-[2rem] text-xl font-black active:scale-95 transition">몰라요</button>
                <button onclick="sortWordAction(true)" class="py-6 bg-indigo-600 text-white rounded-[2rem] text-xl font-black shadow-lg active:scale-95 transition">알아요</button>
            </div>
        </div>

        <div id="step2" class="hidden text-center">
            <div class="mb-10 text-left flex justify-between items-end">
                <div>
                    <p class="text-indigo-500 text-[10px] font-black uppercase tracking-widest mb-1">Step 02. Intensive Learning</p>
                    <h2 class="text-2xl font-black italic">Flash Cards</h2>
                </div>
                <div id="remaining-count" class="text-indigo-400 font-black text-xl">0</div>
            </div>
            <div class="word-card mb-10">
                <div id="cardInner" class="card-inner w-full shadow-2xl" onclick="toggleFlip()">
                    <div class="card-front bg-white border border-slate-100">
                        <span id="flashWord" class="text-5xl font-black text-slate-900 tracking-tighter italic">Word</span>
                    </div>
                    <div class="card-back flex-col">
                        <span id="flashMean" class="text-3xl font-black mb-4">뜻</span>
                        <p id="flashEx" class="italic text-indigo-100 text-sm leading-snug px-6">Example Sentence</p>
                    </div>
                </div>
            </div>
            <div class="space-y-4">
                <button onclick="markAsMemorized()" class="w-full py-6 bg-emerald-500 text-white rounded-[2rem] text-xl font-black shadow-lg active:scale-95 transition">외웠습니다 (삭제)</button>
                <button onclick="nextLoop()" class="w-full py-6 bg-slate-800 text-white rounded-[2rem] text-xl font-black active:scale-95 transition">다음에 다시 (반복)</button>
            </div>
        </div>

        <div id="step3" class="hidden">
            <div class="mb-10 text-left">
                <p class="text-indigo-500 text-[10px] font-black uppercase tracking-widest mb-1">Step 03. Final Test</p>
                <h2 class="text-2xl font-black italic">Select the Meaning</h2>
            </div>
            <div class="bg-white rounded-[3rem] p-10 shadow-2xl mb-8 text-center">
                <span id="quizWord" class="text-4xl font-black text-indigo-600 italic tracking-tighter">Quiz</span>
            </div>
            <div id="quizOptions" class="space-y-3"></div>
        </div>

        <div id="result-screen" class="hidden text-center py-10">
            <div class="w-24 h-24 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl">
                <i class="fas fa-trophy text-4xl text-white"></i>
            </div>
            <h2 class="text-3xl font-black mb-2">학습 완료!</h2>
            <p id="finalScore" class="text-indigo-400 font-black text-5xl mb-10">0점</p>
            <button onclick="location.reload()" class="w-full py-5 bg-white text-slate-900 rounded-2xl font-black text-lg active:scale-95 transition">처음으로</button>
        </div>
    </main>

    <script>
        const verbs50 = [
            {word: "accommodate", mean: "수용하다, 편의를 도모하다", ex: "The hotel can accommodate up to 500 guests."},
            {word: "address", mean: "다루다, 처리하다", ex: "We need to address the technical issues immediately."},
            {word: "allocate", mean: "할당하다, 배정하다", ex: "The board allocated funds for the new project."},
            {word: "anticipate", mean: "예상하다, 기대하다", ex: "We anticipate a significant increase in sales."},
            {word: "approve", mean: "승인하다", ex: "The manager approved the travel expenses."},
            {word: "assign", mean: "배정하다, 맡기다", ex: "The supervisor assigned a new task to the team."},
            {word: "assure", mean: "보장하다, 확신시키다", ex: "I assure you that the order will be delivered on time."},
            {word: "attract", mean: "끌어들이다, 유인하다", ex: "The advertisement attracted many customers."},
            {word: "authorize", mean: "허가하다, 권한을 주다", ex: "Only authorized personnel can enter this area."},
            {word: "collaborate", mean: "협력하다", ex: "We collaborated with the marketing team."},
            {word: "comply", mean: "준수하다 (with)", ex: "Must comply with safety regulations."},
            {word: "confirm", mean: "확인하다, 확정하다", ex: "Please confirm your reservation."},
            {word: "contribute", mean: "기여하다, 공헌하다", ex: "Everyone contributed to the success."},
            {word: "convey", mean: "전달하다", ex: "Conveyed my gratitude to the staff."},
            {word: "delegate", mean: "위임하다", ex: "A leader knows how to delegate tasks."},
            {word: "demonstrate", mean: "입증하다, 시연하다", ex: "Demonstrate the effectiveness of the product."},
            {word: "determine", mean: "결정하다, 알아내다", ex: "Price is determined by demand."},
            {word: "distribute", mean: "배포하다", ex: "Brochures were distributed to all."},
            {word: "ensure", mean: "보장하다, 확실히 하다", ex: "Ensure that all doors are locked."},
            {word: "evaluate", mean: "평가하다", ex: "Performance is evaluated annually."},
            {word: "exceed", mean: "초과하다", ex: "Costs exceeded our budget."},
            {word: "facilitate", mean: "용이하게 하다", ex: "Software will facilitate communication."},
            {word: "finalize", mean: "마무리 짓다", ex: "Finalize the contract by Friday."},
            {word: "fulfill", mean: "충족시키다, 이행하다", ex: "Fulfill all the requirements."},
            {word: "generate", mean: "발생시키다, 창출하다", ex: "Generated a lot of interest."},
            {word: "implement", mean: "시행하다, 실시하다", ex: "Policy will be implemented next month."},
            {word: "indicate", mean: "나타내다", ex: "Surveys indicate high satisfaction."},
            {word: "inspect", mean: "점검하다", ex: "Facility is inspected once a year."},
            {word: "install", mean: "설치하다", ex: "Install a new security system."},
            {word: "instruct", mean: "지시하다", ex: "Instructs users on setup."},
            {word: "investigate", mean: "조사하다", ex: "Investigating the cause of the fire."},
            {word: "maintain", mean: "유지하다", ex: "Maintain a healthy balance."},
            {word: "modify", mean: "수정하다, 변경하다", ex: "Modify the original plan."},
            {word: "monitor", mean: "감시하다, 관찰하다", ex: "Monitors the temperature."},
            {word: "notify", mean: "통지하다, 알리다", ex: "Notify us of any changes."},
            {word: "obtain", mean: "획득하다, 얻다", ex: "Obtain the form at the desk."},
            {word: "occupy", mean: "점유하다, 차지하다", ex: "Rooms are currently occupied."},
            {word: "outline", mean: "개요를 서술하다", ex: "Proposal outlines the goals."},
            {word: "participate", mean: "참여하다", ex: "Participated in the seminar."},
            {word: "postpone", mean: "연기하다", ex: "Postponed until next week."},
            {word: "proceed", mean: "진행하다", ex: "Proceeding as planned."},
            {word: "promote", mean: "승진/홍보하다", ex: "She was promoted to manager."},
            {word: "purchase", mean: "구매하다", ex: "Can be purchased online."},
            {word: "rectify", mean: "바로잡다", ex: "Take steps to rectify the error."},
            {word: "reflect", mean: "반영하다", ex: "Reflects current conditions."},
            {word: "relocate", mean: "이전하다", ex: "Relocating headquarters to Seoul."},
            {word: "request", mean: "요청하다", ex: "Request a refund within 30 days."},
            {word: "respond", mean: "응답하다", ex: "Respond to your inquiry."},
            {word: "submit", mean: "제출하다", ex: "Submit application by deadline."},
            {word: "verify", mean: "확인하다", ex: "Verify your identity."}
        ];

        let unknownWords = [], nextLoopWords = [], quizWords = [];
        let sortIdx = 0, quizIdx = 0, correctCount = 0;
        const synth = window.speechSynthesis;

        // 모바일 오디오 잠금 해제 핵심 로직
        document.getElementById('unlock-btn').addEventListener('click', function() {
            // 1. 무음 발화로 오디오 컨텍스트 활성화 (iOS 핵심)
            const silent = new SpeechSynthesisUtterance("Welcome");
            silent.volume = 0;
            silent.rate = 1;
            synth.speak(silent);

            // 2. 화면 전환
            document.getElementById('start-overlay').classList.add('hidden');
            showSortWord();
        }, { once: true });

        function showSortWord() {
            document.getElementById('sortWord').innerText = verbs50[sortIdx].word;
            document.getElementById('sortCount').innerText = sortIdx + 1;
        }

        window.sortWordAction = (known) => {
            if (!known) unknownWords.push(verbs50[sortIdx]);
            sortIdx++;
            if (sortIdx < verbs50.length) showSortWord();
            else startStep2();
        };

        function startStep2() {
            if (unknownWords.length === 0) { startStep3(); return; }
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
            showFlashCard();
        }

        function showFlashCard() {
            const word = unknownWords[0];
            document.getElementById('flashWord').innerText = word.word;
            document.getElementById('flashMean').innerText = word.mean;
            document.getElementById('flashEx').innerText = word.ex;
            document.getElementById('cardInner').classList.remove('is-flipped');
            document.getElementById('remaining-count').innerText = unknownWords.length;
        }

        window.toggleFlip = () => {
            const card = document.getElementById('cardInner');
            if(!card.classList.contains('is-flipped')) {
                card.classList.add('is-flipped');
                // 카드 뒤집힐 때 발음 재생
                speak(document.getElementById('flashWord').innerText);
            }
        };

        function speak(text) {
            // 이전 재생 취소
            synth.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.lang = 'en-US';
            u.rate = 0.8;
            
            // 모바일 에러 방지를 위한 처리
            try {
                synth.speak(u);
            } catch (e) {
                console.error("Audio play failed", e);
            }
        }

        window.markAsMemorized = () => { unknownWords.shift(); checkCycle(); };
        window.nextLoop = () => { nextLoopWords.push(unknownWords.shift()); checkCycle(); };

        function checkCycle() {
            if (unknownWords.length === 0) {
                if (nextLoopWords.length === 0) startStep3();
                else { unknownWords = [...nextLoopWords]; nextLoopWords = []; showFlashCard(); }
            } else showFlashCard();
        }

        function startStep3() {
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.remove('hidden');
            quizWords = [...verbs50].sort(() => 0.5 - Math.random()).slice(0, 20);
            showQuiz();
        }

        function showQuiz() {
            const correct = quizWords[quizIdx];
            document.getElementById('quizWord').innerText = correct.word;
            let options = [correct.mean];
            while(options.length < 4) {
                let r = verbs50[Math.floor(Math.random()*verbs50.length)].mean;
                if(!options.includes(r)) options.push(r);
            }
            options.sort(() => 0.5 - Math.random());
            const container = document.getElementById('quizOptions');
            container.innerHTML = '';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "w-full py-5 px-8 bg-slate-800 text-white border border-white/5 rounded-2xl font-bold text-left active:bg-indigo-600 transition-all";
                btn.innerText = opt;
                btn.onclick = () => {
                    if(opt === correct.mean) { correctCount++; }
                    else { alert("오답! 정답: " + correct.mean); }
                    quizIdx++;
                    if(quizIdx < quizWords.length) showQuiz();
                    else finishQuiz();
                };
                container.appendChild(btn);
            });
        }

        function finishQuiz() {
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('finalScore').innerText = Math.round((correctCount/20)*100) + "점";
        }
    </script>
</body>
</html>